{% extends "layout.jinja2" %}

{% assets "main_scss_bundle" %}
    <link href="{{ ASSET_URL }}" rel="stylesheet" type="text/css">
{% endassets %}

{% block header %}
{% include "header.jinja2" %}
{% endblock %}

{% block content %}
    <main class="flex-shrink-0">
      <div class="container">
        <div class="mt-5">
          <p class="lead">Credentials</p>
          <p>In order to change your password you must abide to certain system requirements.<br/>
            Your password must be 10 or more characters with a mix of letters, numbers and symbols.</p>
            {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}
                {% for category, message in messages %}
                  <div class="alert alert-{{ category }}"> {{ message }}</div>
                {% endfor %}
              {% endif %}
            {% endwith %}
              <form action="/account" method="POST">
                {{ form.csrf_token }}
                <div class="col-md-2 mb-2">
                  {{ form.current_password.label(for='current_password', class='form-label') }}
                  {{ form.current_password(class='form-control') }}
                </div>
                <div class="col-md-2 mb-2">
                  {{ form.new_password.label(for='new_password', class='form-label') }}
                  {{ form.new_password(class='form-control') }}
                  {% if form.new_password.errors %}
                    <ul class="errors">
                      {% for error in form.new_password.errors %}
                        <li>{{ error }}</li>
                      {% endfor %}
                    </ul>
                  {% endif %}
                </div>
                <div class="col-md-2">
                  {{ form.confirm_password.label(for='confirm_password', class='form-label') }}
                  {{ form.confirm_password(class='form-control') }}
                  {% if form.confirm_password.errors %}
                    <ul class="errors">
                      {% for error in form.confirm_password.errors %}
                        <li>{{ error }}</li>
                      {% endfor %}
                    </ul>
                  {% endif %}
                </div>
                <div class="mb-2">
                    <small class="form-text text-muted">Please re-type your new password to confirm</small>
                </div>
                <div class="col-md-2">
                  <button type="submit" class="btn btn-primary">Update password</button>
                </div>
              </form>
            <p class="mt-3"><s>All password changes are logged and displayed on the <a href="#">statistics</a> page.</s><br/>
        </div>
      </div>
    </main>
{% endblock %}